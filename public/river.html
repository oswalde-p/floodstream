<head>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-2.9.0.min.js"></script>
</head>
<body>
    <div id="gd"></div>

    <script>
            const colors = [
                'rgba(0,0,200,1)',
                'rgba(0,0,200,0.7)',
                'rgba(0,0,200,0.4)',
                'rgba(0,0,200,0.3)',
                'rgba(0,0,200,0.2)',
            ]
            const OBSERVATIONS_URL = '/river-heights/clarence?limit=5'
            const getPlot = (report, ix) => {
                const { reportData, createdOn } = report
                const x = reportData.map(site => site.label)
                const y =  reportData.map(site => site.height)
                return {
                    x,
                    y,
                    name: new Date(createdOn).toLocaleString(),
                    marker: {
                      color: colors[ix]
                    }
                }

            }
            const response = axios.get(OBSERVATIONS_URL)
                .then(response => {
                    const plots = response.data.map(getPlot)
                    const layout = {
                        title: `River Heights - ${response.data[0].riverName.toLocaleUpperCase()}`,
                        xaxis: {
                            title: 'Location'
                        },
                        yaxis: {
                            title: `Height (m)`
                        }
                    }
                    Plotly.newPlot("gd", /* JSON object */ {
                        "data": plots,
                        layout
                    })
                })
    </script>
</body>